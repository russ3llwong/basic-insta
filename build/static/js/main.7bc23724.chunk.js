(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(55)},28:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(18),c=n.n(o),r=(n(28),n(5)),i=n.n(r),u=n(6),l=function(e){return{type:"UPDATE_TEXT",text:e}},m=(n(54),function(e){var t=e.data;return s.a.createElement("div",null,t)}),g=Object(u.b)(function(e){return{messages:e.messageReducer.messages,text:e.messageReducer.text}})(function(e){var t=e.dispatch,n=e.text,a=e.messages;s.a.useEffect(function(){i.a.get("/messanger/getMessages").then(function(e){t({type:"UPDATE_MESSAGES",messages:e.data})}).catch(function(e){console.log(e)})},[]);return s.a.createElement("div",{className:"App"},s.a.createElement("div",null,s.a.createElement("div",{className:"message-area"},a.map(function(e,t){return s.a.createElement(m,{key:t,data:e})}))),s.a.createElement("div",null,s.a.createElement("input",{type:"text",value:n,onChange:function(e){t(l(e.target.value))}})),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){t(function(e,t){i.a.post("/messanger/postMessage",{message:t().messageReducer.text}).then(function(){}).catch(function(e){return console.log(e)}),e(l(""))})}},"Submit")))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=n(21),E=n(3),f=n(22),p=n(7),w={messages:[],text:""},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MESSAGES":return Object(p.a)({},e,{messages:t.messages});case"UPDATE_TEXT":return Object(p.a)({},e,{text:t.text});case"INSERT_MESSAGE":return Object(p.a)({},e,{messages:[].concat(Object(f.a)(e.messages),[t.message])});default:return e}},h=Object(E.c)({messageReducer:v}),b=Object(E.d)(h,Object(E.a)(d.a));new WebSocket("ws://"+window.location.host.split(":")[0]+(window.location.port&&":".concat(window.location.port))+"/websocket").onmessage=function(e){console.log(e),b.dispatch(function(e){return console.log("inserting message"),{type:"INSERT_MESSAGE",message:e}}(e.data))},c.a.render(s.a.createElement(u.a,{store:b},s.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.7bc23724.chunk.js.map